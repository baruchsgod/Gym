@model IEnumerable<Gym.Models.Supplement>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Checkout our supplements</h2>


@if (Model.Count() > 0)
{
    <div class="container">
        <h2>Check out our Supplements</h2>
        <br /><br />
        @for (int i = 0; i < Model.Count(); i++)
        {
            <div class="row">
                @for (int j = 0; j < 3; j++)
                {

                    if (i < Model.Count())
                    {
                        if (j != 2)
                        {
                            <div class="col-md-4 col-sm-6 card-info">
                                <div class="card">
                                    <div class="card-header">
                                        @Model.ElementAt(i).Description
                                    </div>
                                    <div class="card-body">
                                        <h5 class="card-title">Price: @Model.ElementAt(i).Price </h5>
                                        <img src=@Model.ElementAt(i).Image class="supplement-img" />
                                        <div>
                                            <button class="btn btn-success add-to-cart" onclick="CartAlert(@Model.ElementAt(i).Id)">Add to Cart</button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            i++;
                        }
                        else
                        {
                            <div class="col-md-4 col-sm-6 card-info">
                                <div class="card">
                                    <div class="card-header">
                                        @Model.ElementAt(i).Description
                                    </div>
                                    <div class="card-body">
                                        <h5 class="card-title">Price: @Model.ElementAt(i).Price </h5>
                                        <img src=@Model.ElementAt(i).Image class="supplement-img" />
                                        <div>
                                            <button class="btn btn-success add-to-cart" onclick="CartAlert(@Model.ElementAt(i).Id)">Add to Cart</button>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        }

                    }



                }
            </div>
        }
    </div>
}
else
{

    <div class="bg-light p-5 rounded">
        <div class="container">
            <h1>No supplements available</h1>
            <p class="lead">We do not have any supplements available at this moment, we will update this page once we have new inventory in storage, so keep reviewing this page for new updates. </p>
            <button class="btn btn-lg btn-success">@Html.ActionLink("Go Back", "Index", "Home")</button>
        </div>

    </div>
}

@section scripts
    {
    <script>

        function CartAlert(id) {
            
            bootbox.confirm("Are you sure you want to add this item to the cart?", function (result) {
                if (result) {
                    $.ajax({

                        url: "/Supplements/ShopCart/" + id,
                        method: "POST",
                        error: function () {
                            bootbox.alert({
                                message: "There has been an error",
                                className: 'rubberBand animated'
                            });
                        },
                        success: function () {
                            bootbox.alert({
                                message: "The item has been added to the cart",
                                className: 'rubberBand animated'
                            }); }
                    });
                }
            });
        }
            
    </script>
}

